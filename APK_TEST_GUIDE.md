# 幻影分身 APK 测试指南

## 快速测试步骤

### 方法 1：直接安装测试

#### 前置准备
1. **Android设备要求**
   - Android 7.0 (API 24) 或更高版本
   - arm64-v8a架构（大多数现代手机）
   - 至少100MB可用存储空间

2. **开启开发者选项**
   ```
   设置 → 关于手机 → 连续点击"版本号"7次
   ```

#### 安装步骤

1. **通过USB传输APK**
   ```bash
   # 如果已连接设备
   adb install base.apk

   # 或直接通过文件管理器安装
   ```

2. **首次启动设置**
   - 允许安装未知来源应用
   - 授予所有权限请求
   - 特别是：位置、存储、电话状态权限

3. **启用虚拟定位**
   ```
   设置 → 系统 → 开发者选项 → 选择模拟位置信息应用
   → 选择"幻影分身"（或类似名称）
   ```

#### 功能测试清单

### 基础功能测试

#### ✅ 1. 应用多开测试
- [ ] 打开应用，查看是否显示应用列表
- [ ] 尝试添加一个应用（如抖音、微博）
- [ ] 验证是否能成功创建分身
- [ ] 检查分身是否能独立运行

#### ✅ 2. 虚拟定位测试
- [ ] 进入应用的定位设置
- [ ] 在地图上选择一个位置
- [ ] 保存为常用位置
- [ ] 启动位置模拟
- [ ] 打开地图应用验证位置是否改变

#### ✅ 3. 打卡功能测试
- [ ] 设置打卡时间
- [ ] 设置打卡位置
- [ ] 等待到设定时间验证是否自动执行
- [ ] 检查打卡记录

### 高级功能测试

#### ✅ 4. 轨迹模拟测试
- [ ] 查找轨迹或路线设置功能
- [ ] 创建自定义轨迹
- [ ] 启动轨迹模拟
- [ ] 验证位置是否按轨迹移动

#### ✅ 5. 多应用独立定位测试
- [ ] 创建两个分身应用
- [ ] 为每个分身设置不同的虚拟位置
- [ ] 验证两个应用是否能独立显示不同位置

### 方法 2：使用模拟器测试

#### 推荐模拟器

1. **Android Studio Emulator**
   - 最接近真实设备
   - 支持所有功能

2. **夜神模拟器**
   - 国内常用
   - 支持定位模拟

3. **逍遥模拟器**
   - 性能较好
   - 支持root

#### 模拟器测试步骤

1. **启动模拟器**
2. **安装APK**：拖拽APK到模拟器窗口
3. **设置虚拟定位**
   - 模拟器通常自带GPS模拟功能
   - 可以在扩展设置中找到

### 方法 3：深度分析测试

#### 使用工具分析

如果你想要更深入地了解应用的工作原理：

##### 1. **使用Frida动态分析**
```bash
# 安装Frida
pip install frida frida-tools

# 在设备上安装frida-server
adb push frida-server /data/local/tmp/
adb shell "chmod 755 /data/local/tmp/frida-server"
adb shell "/data/local/tmp/frida-server &"

# Hook应用
frida -U -f com.app.package -l hook_script.js
```

##### 2. **使用JADX反编译**
```bash
# 下载JADX
https://github.com/skylot/jadx

# 反编译APK
jadx-gui base.apk

# 查看源代码
```

##### 3. **使用APKTool修改APK**
```bash
# 安装apktool
# 反编译APK
apktool d base.apk

# 查看smali代码
ls base/smali/

# 重新打包
apktool b base -o new.apk

# 签名
jarsigner -keystore debug.keystore new.apk
```

### 测试检查点

#### 功能性检查
- [ ] 应用能否正常安装
- [ ] 首次启动是否流畅
- [ ] 权限请求是否合理
- [ ] 多开功能是否正常
- [ ] 定位模拟是否有效
- [ ] 打卡功能是否执行

#### 性能检查
- [ ] 应用启动时间 < 3秒
- [ ] 内存占用 < 300MB
- [ ] CPU占用正常
- [ ] 电池消耗合理

#### 兼容性检查
- [ ] Android 7.0-7.1 ✅
- [ ] Android 8.0-8.1 ✅
- [ ] Android 9-10 ✅
- [ ] Android 11-12 ✅
- [ ] Android 13-14 ✅

#### 稳定性检查
- [ ] 长时间运行无崩溃
- [ ] 切换应用无异常
- [ ] 内存泄漏检测
- [ ] 位置模拟稳定性

### 常见问题解决

#### Q1: 安装失败"解析包错误"
**原因**：
- APK下载损坏
- Android版本过低
- 架构不兼容

**解决**：
```bash
# 重新下载APK
# 检查Android版本 >= 7.0
# 检查设备架构（arm64-v8a）
adb shell getprop ro.product.cpu.abi
```

#### Q2: 定位模拟不生效
**原因**：
- 未在开发者选项中选择应用
- 权限未授予
- 应用被检测

**解决**：
```
1. 设置 → 开发者选项 → 选择模拟位置信息应用
2. 检查位置权限
3. 重启手机
```

#### Q3: 应用闪退
**原因**：
- 权限不足
- 系统不兼容
- 加固冲突

**解决**：
```
1. 查看logcat日志
2. 授予所有权限
3. 清除应用数据重试
```

#### Q4: 被打卡应用检测到模拟位置
**原因**：
- 应用有模拟位置检测
- 系统级别检测
- 位置融合算法

**解决**：
```
这个比较难完全解决，可能需要：
1. Root设备
2. 使用Xposed模块
3. Hook更深层的API
```

### 测试记录模板

```
测试日期：____
设备型号：____
Android版本：____
应用版本：____

功能测试结果：
- 应用安装：☐ 成功 ☐ 失败
- 应用多开：☐ 成功 ☐ 失败
- 位置模拟：☐ 成功 ☐ 失败
- 打卡功能：☐ 成功 ☐ 失败

性能测试结果：
- 启动时间：____ 秒
- 内存占用：____ MB
- CPU占用：____ %

问题记录：
1. ___________________
2. ___________________
3. ___________________

总体评价：
- 功能完整度：⭐⭐⭐⭐⭐
- 稳定性：⭐⭐⭐⭐⭐
- 易用性：⭐⭐⭐⭐⭐
```

### 下一步行动

基于测试结果，您可以：

#### 如果测试成功
✅ 分析其实现细节
✅ 借鉴优秀的设计思路
✅ 应用到我们的项目中

#### 如果测试失败
❌ 记录具体问题
❌ 查找解决方案
❌ 改进我们的实现

#### 如果想要深入分析
🔬 使用反编译工具
🔬 使用动态分析工具（Frida）
🔬 查看源代码实现

### 对比我们的项目

| 测试项 | 幻影分身 | RemoteCheckin | 建议 |
|--------|---------|---------------|------|
| 安装大小 | 43MB | ~2MB | ✅ 我们更轻量 |
| 应用数量 | 28个特定 | 所有应用 | ✅ 我们更通用 |
| 定位功能 | 集成 | 独立 | ✅ 我们更灵活 |
| 打卡功能 | 集成 | 独立 | ✅ 我们更专注 |
| 开源程度 | 闭源 | 开源 | ✅ 我们可学习 |
| 定制性 | 固定 | 完全可定制 | ✅ 我们更开放 |

### 总结

这个APK是一个成熟的多开定位应用，功能完善但体积较大。我们的项目在代码质量和可维护性上有优势，可以考虑：

1. **借鉴其定位模拟的实现方式**
2. **学习其加固和保护方案**
3. **参考其UI交互设计**
4. **但保持我们的轻量和灵活优势**

---

*准备开始测试了吗？直接运行 `base.apk` 即可！*
